generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}
enum UserVerifyStatus {
  Unverified // Là 0
  Verified // Là 1
  Banned  // Là -1
}
model Users {
  id                   String @id @map("_id") @default(auto()) @db.ObjectId
  name                 String
  email                String @unique
  dateOfBirth          DateTime
  password             String
  createdAt            DateTime @default(now())
  updatedAt            DateTime @updatedAt
  emailVerifiedToken   String @default("")
  forgotPasswordToken  String @default("")
  verifyStatus         Int @default(0)
  bio                  String @default("")
  location             String @default("")
  website              String @default("")
  username             String @unique @default(cuid())
  avatar               String @default("")
  coverPhoto           String @default("")
  refreshTokens        Refresh_Tokens[]
  followers            Followers[] @relation("FollowedRelation")      // Những người theo dõi mình
  followings           Followers[] @relation("FollowingRelation")     // Những người mình theo dõi
}

model Refresh_Tokens{
  id                   String @id @map("_id") @default(auto()) @db.ObjectId
  token                String
  createdAt            DateTime @default(now())
  expiresAt            DateTime @db.Timestamp() @map("expiresAt")
  userId               String @db.ObjectId
  user                 Users @relation(fields: [userId],references: [id])
}

model Followers{
  id                   String @id @map("_id") @default(auto()) @db.ObjectId
  userId               String @db.ObjectId
  followedUserId       String @db.ObjectId
  createdAt            DateTime @default(now())
  user                 Users @relation("FollowingRelation", fields: [userId], references: [id])
  followedUser         Users @relation("FollowedRelation", fields: [followedUserId], references: [id])
}
